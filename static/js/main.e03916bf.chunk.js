(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{29:function(e,a,t){e.exports=t(51)},34:function(e,a,t){},35:function(e,a,t){},36:function(e,a,t){},51:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(18),i=t.n(c),s=t(5);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(34),t(35),t(36);var l=function(){return r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"header__title"},r.a.createElement("span",{className:"header__title--color"},"Fetch"),"Me",r.a.createElement("span",{className:"header__title--color"},"Beer"))))},o=t(6),m=t(11),u=t(12),d=t(15),h=t(14),g=t(16),f=(t(37),t(7)),b=function(e){return r.a.createElement("div",{className:"col-sm-6 col-lg-4 col-xl-3 list__element"},r.a.createElement(s.b,{className:"list__link",to:"/beer/"+e.id},r.a.createElement("figure",{className:"list__figure"},r.a.createElement("img",{className:"img-thumbnail list__img",src:e.image,alt:e.name+"-image"}),r.a.createElement("figcaption",{className:"list__figcaption"},r.a.createElement("h2",{className:"h2 list__title"},e.name),r.a.createElement("p",{className:"list__descr"},e.tagline)))))},E=function(){return r.a.createElement("div",{className:"container error-msg"},r.a.createElement("h2",{className:"error-msg__title"},"Error!"),r.a.createElement("p",{className:"error-msg__text"},"We're terribly sorry. No beers could be loaded at the time! :("))},_=function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("p",{className:"end-message-text"},"Seems like these are all the beers as for today! Come back later for more!"))))},v=t(13),p=t(27),N=t.n(p),k=function(e){return r.a.createElement("section",{className:"mod__main"},r.a.createElement("img",{className:"mod__img",src:e.image,alt:e.name+"-image"}),r.a.createElement("div",{className:"mod__content"},r.a.createElement("h2",{className:"h2 mod__title"},e.name),r.a.createElement("p",{className:"mod__tagline"},e.tagline),r.a.createElement("p",{className:"mod__params"},r.a.createElement("strong",null,"IBU:"),e.ibu," ",r.a.createElement("strong",null,"ABV:"),e.abv," ",r.a.createElement("strong",null,"EBC:"),e.ebc),r.a.createElement("p",{className:"mod__descr"},e.description)))},y=function(e){return r.a.createElement("div",{className:"mod__sec-content"},r.a.createElement("img",{className:"mod__img-sec",src:e.image,alt:e.image+"-image"}),r.a.createElement("h4",{className:"mod__sec-title"},e.name))},D=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(d.a)(this,Object(h.a)(a).call(this,e))).changeMainBeer=function(e){t.setState({isMainLoading:!0,isSecLoading:!0}),M.call(Object(v.a)(t),e)},t.handleEscapeClick=function(e){t.props.history.push("/")},t.handleBodyClick=function(e){e.stopPropagation()},t.state={isMainLoading:!0,isSecLoading:!0,id:t.props.match.params.id,error:null,errorSec:null,mainData:null,secData:null,secDataAccuracy:1},t}return Object(g.a)(a,e),Object(u.a)(a,[{key:"componentDidMount",value:function(){M.call(this,this.props.match.params.id)}},{key:"render",value:function(){var e,a,t=this;if(e=this.state.isMainLoading?r.a.createElement("section",{className:"mod__main"},r.a.createElement("div",{className:"loading"})):r.a.createElement(k,{name:this.state.mainData[0].name,image:this.state.mainData[0].image_url,tagline:this.state.mainData[0].tagline,ibu:this.state.mainData[0].ibu,abv:this.state.mainData[0].abv,ebc:this.state.mainData[0].ebc,description:this.state.mainData[0].description}),this.state.isSecLoading)a=r.a.createElement("section",{className:"row mod__sec"},r.a.createElement("div",{className:"loading"}));else{var n=O(this.state.secData,this.state.id).map(function(e,a){return r.a.createElement(s.b,{key:a,className:"mod__sec-link col-4",to:"/beer/"+e.id,onClick:function(){t.changeMainBeer(e.id)}},r.a.createElement(y,{id:e.id,name:e.name,image:e.image_url}))});a=r.a.createElement("section",{className:"row mod__sec"},r.a.createElement("p",{className:"mod__sec-info"},"You might also like:"),n)}return r.a.createElement("div",{className:"mod",onClick:this.handleEscapeClick},r.a.createElement("div",{className:"mod__body",onClick:this.handleBodyClick},r.a.createElement("button",{className:"mod__escape-btn",onClick:this.handleEscapeClick}),e,a),r.a.createElement(N.a,null))}}]),a}(r.a.Component),M=function(e){var a=this;fetch(C+"beers/"+e).then(function(e){if(e.ok)return e.json();throw new Error("Sorry. An error occurred...")}).then(function(e){a.setState({mainData:e,isMainLoading:!1},function(){var e=j(a.state.mainData,a.state.secDataAccuracy);w.call(a,e)})}).catch(function(e){return a.setState({error:e})})},w=function e(a){var t=this;if(!a)return!1;var n="beers?abv_lt="+a.abvMax+"&abv_gt="+a.abvMin+"&ibu_lt="+a.ibuMax+"&ibu_gt="+a.ibuMin+"&ebc_lt="+a.ebcMax+"&ebc_gt="+a.ebcMin;return fetch(C+n).then(function(e){if(e.ok)return e.json();throw new Error("Sorry. An error occurred...")}).then(function(a){t.setState({secData:a,isSecLoading:!(a.length>3),secDataAccuracy:2*t.state.secDataAccuracy},function(){if(t.state.secData.length<4){var a=j(t.state.mainData,t.state.secDataAccuracy);e.call(t,a)}})}).catch(function(e){return t.setState({errorSec:e})}),!1},j=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!e)return!1;var t=parseInt(a);"number"!==typeof t&&(t=1);var n={abv:e[0].abv,ibu:e[0].ibu,ebc:e[0].ebc},r={abv:(n.abv<6?1.5:2.5)*t,ibu:(n.ibu<30?7:14)*t,ebc:(n.ebc<30?5:10)*t},c={};for(var i in n)c[i+"Min"]=Number(n[i])-Number(r[i]),c[i+"Max"]=Number(n[i])+Number(r[i]);for(var s in c)c[s]=Math.round(parseInt(c[s])),c[s]=c[s]>0?c[s]:0;return c},O=function(e,a){return!(e.length<4||!a)&&function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id";if("number"!==typeof a||e.length<a||"string"!==typeof t)return!1;e.forEach(function(e){if(!e[t])return!1});var n=[],r=[];if(e.length===a)n=Object(o.a)(e);else{for(;r.length<a;){var c=e[(i=0,s=e.length-1,Math.floor(Math.random()*(s-i)+i))][t];r.indexOf(c)>-1||r.push(c)}r.forEach(function(a){var r=e.filter(function(e){return e[t]===a});n.push(r[0])})}var i,s;return n}(Object(o.a)(e).filter(function(e){return e.id!==Number(a)}),3,"id")};var S=t(28),x=t.n(S),C="https://api.punkapi.com/v2/",L="beers?per_page=20&page=",B=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(d.a)(this,Object(h.a)(a).call(this,e))).getMoreData=function(){fetch(C+L+t.state.nextPage).then(function(e){if(e.ok)return e.json();throw new Error("Sorry. An error occurred...")}).then(function(e){t.setState({data:[].concat(Object(o.a)(t.state.data),Object(o.a)(e)),nextPage:t.state.nextPage+1}),t.state.data.length===[].concat(Object(o.a)(t.state.data),Object(o.a)(e)).length&&t.setState({moreItemsToLoad:!1})}).catch(function(e){return t.setState({error:e})})},t.state={data:[],nextPage:1,error:null,moreItemsToLoad:!0},t}return Object(g.a)(a,e),Object(u.a)(a,[{key:"componentDidMount",value:function(){this.getMoreData()}},{key:"render",value:function(){if(this.state.error)return r.a.createElement(E,null);var e=r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("p",{className:"loading-text"},"Fetching more beers for ya! Hold on..."))));return r.a.createElement(x.a,{dataLength:this.state.data.length,scrollThreshold:.9,next:this.getMoreData,hasMore:this.state.moreItemsToLoad,loader:e,endMessage:r.a.createElement(_,null)},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row list"},this.state.data.map(function(e,a){return r.a.createElement(b,{key:a,id:e.id,name:e.name,tagline:e.tagline,image:e.image_url})}))),r.a.createElement(f.a,{path:"/beer/:id",component:D}))}}]),a}(r.a.Component),A=function(){return r.a.createElement("div",null,r.a.createElement(l,null),r.a.createElement(B,null))};i.a.render(r.a.createElement(s.a,null,r.a.createElement(A,null)),document.getElementById("app")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[29,1,2]]]);
//# sourceMappingURL=main.e03916bf.chunk.js.map