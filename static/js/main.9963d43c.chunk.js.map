{"version":3,"sources":["serviceWorker.js","components/common/Header.js","components/ListElement/ListElement.js","components/common/ErrorMsg.js","components/common/EndMsg.js","components/ModalMainElement/ModalMainElement.js","components/ModalSecElement/ModalSecElement.js","components/Modal/Modal.js","components/List/List.js","components/App.js","index.js"],"names":["Boolean","window","location","hostname","match","Header","className","ListElement","props","to","id","src","image","alt","name","tagline","ErrorMsg","EndMsg","ModalMainElement","ibu","abv","ebc","description","ModalSecElement","Modal","changeMainBeer","newId","setState","isMainLoading","isSecLoading","fetchBeer","call","handleEscapeClick","e","history","push","handleBodyClick","stopPropagation","state","params","error","errorSec","mainData","secData","secDataAccuracy","this","mainBeerSection","relatedBeersSection","image_url","secElements","getRelatedBeers","map","el","i","key","onClick","React","Component","beerId","fetch","apiUrl","then","response","ok","json","Error","data","relProps","getRelatedBeersData","fetchRelatedBeers","catch","searchQuery","abvMax","abvMin","ibuMax","ibuMin","ebcMax","ebcMin","length","newRelProps","beerData","accFact","accFactor","parseInt","mainProps","propsRanges","Number","Math","round","mainBeerId","inputArr","num","uniqueProperty","forEach","resultArray","uniquePropertyArray","randomElementProperty","min","max","floor","random","indexOf","uniqueElement","filter","elem","randomizeUniqueElements","query","List","getMoreData","nextPage","moreItemsToLoad","loader","dataLength","scrollThreshold","next","hasMore","endMessage","beer","path","component","App","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.9963d43c.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\n\nconst Header = () => {\n  return(\n    <header className=\"header\">\n      <div className=\"container\">\n        <h1 className=\"header__title\"><span className=\"header__title--color\">Fetch</span>Me<span className=\"header__title--color\">Beer</span></h1>\n      </div>\n    </header>\n  );\n};\n\nexport default Header;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from \"react-router-dom\";\n\nconst ListElement = (props) => {\n  return(\n    <div className=\"col-sm-6 col-lg-4 col-xl-3 list__element\">\n      <Link className=\"list__link\" to={\"/beer/\" + props.id}>\n        <figure className=\"list__figure\">\n          <img \n            className=\"img-thumbnail list__img\"\n            src={props.image}\n            alt={props.name + '-image'}/>\n          <figcaption className=\"list__figcaption\">\n            <h2 className=\"h2 list__title\">{props.name}</h2>\n            <p className=\"list__descr\">{props.tagline}</p>\n          </figcaption>\n        </figure>\n      </Link>\n    </div>\n  );\n};\n\nListElement.propTypes = {\n  id: PropTypes.number,\n  name: PropTypes.string,\n  tagline: PropTypes.string,\n  image: PropTypes.string\n};\n\nexport default ListElement;","import React from 'react';\n\nconst ErrorMsg = () => {\n  return(\n    <div className=\"container error-msg\">\n      <h2 className=\"error-msg__title\">Error!</h2>\n      <p className=\"error-msg__text\">We're terribly sorry. No beers could be loaded at the time! :(</p>\n    </div>\n  );\n};\n\nexport default ErrorMsg;","import React from 'react';\n\nconst EndMsg = () => {\n  return (\n    <div className=\"container\">\n      <div className=\"row\">\n        <div className=\"col-sm-12\">\n          <p className=\"end-message-text\">\n            Seems like these are all the beers as for today! Come back later for more!\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default EndMsg;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst ModalMainElement = (props) => {\n\treturn(\n\t\t<section className=\"mod__main\">\n\t\t\t<img \n\t\t\t\tclassName=\"mod__img\"\n\t\t\t\tsrc={props.image}\n\t\t\t\talt={props.name + '-image'}\n\t\t\t/>\n\t\t\t<div className=\"mod__content\">\n\t\t\t\t<h2 className=\"h2 mod__title\">{props.name}\n\t\t\t\t</h2>\n\t\t\t\t<p className=\"mod__tagline\">{props.tagline}\n\t\t\t\t</p>\n\t\t\t\t<p className=\"mod__params\">\n\t\t\t\t<strong>IBU:</strong>\n\t\t\t\t{props.ibu} <strong>ABV:</strong>\n\t\t\t\t{props.abv} <strong>EBC:</strong>\n\t\t\t\t{props.ebc}\n\t\t\t\t</p>\n\t\t\t\t<p className=\"mod__descr\">{props.description}</p>\n\t\t\t</div>\n\t\t</section>\n\t);\n};\n\nModalMainElement.propTypes = {\n\tname: PropTypes.string,\n\timage: PropTypes.string,\n\ttagline: PropTypes.string,\n\tibu: PropTypes.number,\n\tabv: PropTypes.number,\n\tebc: PropTypes.number,\n\tdescription: PropTypes.string\n};\n\nexport default ModalMainElement;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst ModalSecElement = (props) => {\n\treturn(\n\t\t<div className=\"mod__sec-content\">\n\t\t\t<img\n\t\t\t\tclassName=\"mod__img-sec\"\n\t\t\t\tsrc={props.image}\n\t\t\t\talt={props.image + '-image'}\n\t\t\t/>\n\t\t\t<h4 className=\"mod__sec-title\">\n\t\t\t\t{props.name}\n\t\t\t</h4>\n\t\t</div>\n\t);\n};\n\nModalSecElement.propTypes = {\n\tid: PropTypes.number,\n\tname: PropTypes.string,\n\timage: PropTypes.string\n};\n\nexport default ModalSecElement;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from \"react-router-dom\";\nimport ScrollLock from 'react-scrolllock';\n\nimport ModalMainElement from '../ModalMainElement/ModalMainElement';\nimport ModalSecElement from '../ModalSecElement/ModalSecElement';\n\nimport { apiUrl } from '../List/List';\nconst query = 'beers/';\n\nexport default class Modal extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tisMainLoading: true,\n\t\t\tisSecLoading: true,\n\t\t\tid: this.props.match.params.id,\n\t\t\terror: null,\n\t\t\terrorSec: null,\n\t\t\tmainData: null,\n\t\t\tsecData: null,\n\t\t\tsecDataAccuracy: 1\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tfetchBeer.call(this, this.props.match.params.id);\n\t}\n\n\tchangeMainBeer = newId => {\n\t\tthis.setState({\n\t\t\tisMainLoading: true,\n\t\t\tisSecLoading: true\n\t\t});\n\t\tfetchBeer.call(this, newId);\n\t\treturn;\n\t}\n\n\thandleEscapeClick = e => {\n\t\tthis.props.history.push('/');\n\t\treturn;\n\t}\n\n\thandleBodyClick = e => {\n\t\te.stopPropagation();\n\t}\n\n\trender() {\n\t\t// Main beer section\n\t\tlet mainBeerSection;\n\t\tif (this.state.isMainLoading) {\n\t\t\tmainBeerSection = (\n\t\t\t\t<section className=\"mod__main\">\n\t\t\t\t\t<div className=\"loading\"/>\n\t\t\t\t</section>\n\t\t\t);\n\t\t} else {\n\t\t\tmainBeerSection = (\n\t\t\t\t<ModalMainElement\n\t\t\t\t\tname={this.state.mainData[0].name}\n\t\t\t\t\timage={this.state.mainData[0].image_url}\n\t\t\t\t\ttagline={this.state.mainData[0].tagline}\n\t\t\t\t\tibu={this.state.mainData[0].ibu}\n\t\t\t\t\tabv={this.state.mainData[0].abv}\n\t\t\t\t\tebc={this.state.mainData[0].ebc}\n\t\t\t\t\tdescription={this.state.mainData[0].description}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\t\n\t\t// Related beers section\n\t\tlet relatedBeersSection;\n\t\tif (this.state.isSecLoading) {\n\t\t\trelatedBeersSection = (\n\t\t\t\t<section className=\"row mod__sec\">\n\t\t\t\t\t<div className=\"loading\"/>\n\t\t\t\t</section>\n\t\t\t);\n\t\t} else {\n\t\t\tconst secElementsData = getRelatedBeers(this.state.secData, this.state.id);\n\t\t\tconst secElements = secElementsData.map((el, i) => {\n\t\t\t\treturn(\n\t\t\t\t\t<Link\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\tclassName=\"mod__sec-link col-4\"\n\t\t\t\t\t\tto={\"/beer/\" + el.id}\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tthis.changeMainBeer(el.id);\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t<ModalSecElement\n\t\t\t\t\t\t\tid={el.id}\n\t\t\t\t\t\t\tname={el.name}\n\t\t\t\t\t\t\timage={el.image_url}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Link>\n\t\t\t\t);\n\t\t\t});\n\t\t\trelatedBeersSection = (\n\t\t\t\t<section className=\"row mod__sec\">\n\t\t\t\t\t<p className=\"mod__sec-info\">\n\t\t\t\t\t\tYou might also like:\n\t\t\t\t\t</p>\n\t\t\t\t\t{secElements}\n\t\t\t\t</section>\n\t\t\t);\n\t\t}\n\n\t\t// Actual render\n\t\treturn(\n\t\t\t<div\n\t\t\t\tclassName=\"mod\"\n\t\t\t\tonClick={this.handleEscapeClick}>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"mod__body\"\n\t\t\t\t\tonClick={this.handleBodyClick}>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"mod__escape-btn\"\n\t\t\t\t\t\tonClick={this.handleEscapeClick}\n\t\t\t\t\t/>\n\t\t\t\t\t{mainBeerSection}\n\t\t\t\t\t{relatedBeersSection}\n\t\t\t\t</div>\n\t\t\t\t<ScrollLock/>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nModal.propTypes = {\n  match: PropTypes.shape({\n\t\tparams: PropTypes.shape({\n\t\t\tid: PropTypes.string\n\t\t})\n\t}),\n\thistory: PropTypes.shape({\n\t\tpush: PropTypes.func\n\t})\n};\n\n/* Fetch functions */\n\n// Fetch main item by ID (selected by user)\nconst fetchBeer = function(beerId) {\n\tfetch(apiUrl + query + beerId)\n\t\t.then(response => {\n\t\t\tif (response.ok) {\n\t\t\t\treturn response.json();\n\t\t\t} else {\n\t\t\t\tthrow new Error('Sorry. An error occurred...');\n\t\t\t}\n\t\t})\n\t\t.then(data => {\n\t\t\tthis.setState({\n\t\t\t\tmainData: data,\n\t\t\t\tisMainLoading: false\n\t\t\t}, () => {\n\t\t\t\t// Fetchnig sec items here\n\t\t\t\tconst relProps = getRelatedBeersData(this.state.mainData, this.state.secDataAccuracy);\n\t\t\t\tfetchRelatedBeers.call(this, relProps);\n\t\t\t});\n\t\t})\n\t\t.catch(error => this.setState({error: error}));\n};\n\n// Fetch items similar to main items\nconst fetchRelatedBeers = function(relProps) {\n\tif(!relProps) {\n\t\treturn false;\n\t}\n\t// Generating conditional search API url\n\tconst searchQuery = 'beers?' +\n\t\t'abv_lt=' + relProps.abvMax +\n\t\t'&abv_gt=' + relProps.abvMin +\n\t\t'&ibu_lt=' + relProps.ibuMax +\n\t\t'&ibu_gt=' + relProps.ibuMin +\n\t\t'&ebc_lt=' + relProps.ebcMax +\n\t\t'&ebc_gt=' + relProps.ebcMin;\n\t\n\t// Fetching items\n\tfetch(apiUrl + searchQuery)\n\t\t.then(response => {\n\t\t\tif (response.ok) {\n\t\t\t\treturn response.json();\n\t\t\t} else {\n\t\t\t\tthrow new Error('Sorry. An error occurred...');\n\t\t\t}\n\t\t})\n\t\t.then(data => {\n\t\t\tthis.setState({\n\t\t\t\tsecData: data,\n\t\t\t\tisSecLoading: data.length > 3 ? false : true,\n\t\t\t\tsecDataAccuracy: this.state.secDataAccuracy * 2\n\t\t\t}, () => {\n\t\t\t\tif (this.state.secData.length < 4) {\n\t\t\t\t\tconst newRelProps = getRelatedBeersData(this.state.mainData, this.state.secDataAccuracy);\n\t\t\t\t\tfetchRelatedBeers.call(this, newRelProps);\n\t\t\t\t}\n\t\t\t});\n\t\t})\n\t\t.catch(error => this.setState({errorSec: error}));\n\t\t\n\treturn false;\n};\n\n/* Select functions */\n\n// Get data of items similar to main item\nconst getRelatedBeersData = (beerData, accFact = 1) => {\n\t// Initial function conditions\n\tif (!beerData) {\n\t\treturn false;\n\t}\n\n\tlet accFactor = parseInt(accFact);\n\n\tif (typeof accFactor !== 'number') {\n\t\taccFactor = 1;\n\t}\n\n\tconst mainProps = {\n\t\t// alcohol\n\t\tabv: beerData[0].abv,\n\t\t// bitterness 8 - 120+\n\t\tibu: beerData[0].ibu,\n\t\t// colour 4 - 138\n\t\tebc: beerData[0].ebc\n\t};\n\t\n\tconst propsRanges = {\n\t\tabv: (mainProps.abv < 6 ? 1.5 : 2.5) * accFactor,\n\t\tibu: (mainProps.ibu < 30 ? 7 : 14) * accFactor,\n\t\tebc: (mainProps.ebc < 30 ? 5 : 10) * accFactor\n\t};\n\n\tlet relProps = {};\n\tfor (let key in mainProps) {\n\t\t// Get properties of related items\n\t\trelProps[(key + \"Min\")] = Number(mainProps[key]) - Number(propsRanges[key]);\n\t\trelProps[(key + \"Max\")] = Number(mainProps[key]) + Number(propsRanges[key]);\n\t}\n\n\tfor (let key in relProps) {\n\t\t// Beautify properties\n\t\trelProps[key] = Math.round(parseInt(relProps[key]));\n\t\t// Set property as 0 if less than 0\n\t\trelProps[key] = relProps[key] > 0 ? relProps[key] : 0;\n\t}\n\treturn relProps;\n};\n\n// Choose items to display as secondary\nconst getRelatedBeers = function(beerData, mainBeerId) {\n\tif(beerData.length < 4 || !mainBeerId) {\n\t\treturn false;\n\t}\n\n\t// Remove main beer from list\n\tlet trimmedBeerData = [...beerData].filter(el => {\n\t\treturn el.id !== Number(mainBeerId);\n\t});\n\n\t// Get 3 unique elements from list\n\tconst secElementsData = randomizeUniqueElements(trimmedBeerData, 3, 'id');\n\n\treturn secElementsData;\n};\n\n/* Unit functions */\n\n// Get random number\nfunction getRandomNum(min, max) {\n\treturn Math.floor(Math.random() * (max - min) + min);\n}\n\n// Randomize unique elements from list\nfunction randomizeUniqueElements(inputArr, num, uniqueProperty = \"id\") {\n\tif (\n\t\ttypeof num !== 'number' ||\n\t\tinputArr.length < num ||\n\t\ttypeof uniqueProperty !== 'string' \n\t) {\n\t\treturn false;\n\t}\n\t// Check if every object has unique property\n\tinputArr.forEach(el => {\n\t\tif(!el[uniqueProperty]) {\n\t\t\treturn false;\n\t\t}\n\t});\n\n\t// Function body\n\tlet resultArray = [];\n\tlet uniquePropertyArray = [];\n\tif(inputArr.length === num) {\n\t\tresultArray = [...inputArr];\n\t} else {\n\t\t// Get unique IDs to be returned\n\t\twhile(uniquePropertyArray.length < num) {\n\t\t\tconst randomElementProperty = inputArr[getRandomNum(0, inputArr.length - 1)][uniqueProperty];\n\t\t\tif (uniquePropertyArray.indexOf(randomElementProperty) > -1) continue;\n\t\t\tuniquePropertyArray.push(randomElementProperty);\n\t\t}\n\t\t// Get elements with unique IDs\n\t\tuniquePropertyArray.forEach(el => {\n\t\t\tconst uniqueElement = inputArr.filter(elem => {\n\t\t\t\treturn elem[uniqueProperty] === el;\n\t\t\t});\n\t\t\tresultArray.push(uniqueElement[0]);\n\t\t});\n\t}\n\n\treturn resultArray;\n}\n\n// Exporting functions for testing purposes\nexport {\n\tfetchBeer,\n\tfetchRelatedBeers,\n\tgetRelatedBeersData,\n\tgetRelatedBeers,\n\tgetRandomNum,\n\trandomizeUniqueElements\n};","import React from 'react';\nimport 'whatwg-fetch';\nimport { Route } from \"react-router-dom\";\n\nimport ListElement from '../ListElement/ListElement';\nimport ErrorMsg from '../common/ErrorMsg';\nimport EndMsg from '../common/EndMsg';\nimport Modal from '../Modal/Modal';\nimport InfiniteScroll from 'react-infinite-scroll-component';\n\nconst apiUrl = 'https://api.punkapi.com/v2/';\nconst query = 'beers?per_page=20&page=';\n\nexport default class List extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: [],\n      nextPage: 1,\n      error: null,\n      moreItemsToLoad: true\n    };\n  } \n\n  componentDidMount() {\n    this.getMoreData();\n  }\n\n  getMoreData = () => {\n    fetch(apiUrl + query + this.state.nextPage)\n      .then(response => {\n        if (response.ok) {\n          return response.json();\n        } else {\n          throw new Error('Sorry. An error occurred...');\n        }\n      })\n      .then(data => {this.setState({\n        data: [...this.state.data, ...data],\n        nextPage: this.state.nextPage + 1\n        });\n        if (this.state.data.length === [...this.state.data, ...data].length) {\n          this.setState({ moreItemsToLoad: false });\n        }})\n      .catch(error => this.setState({error: error}));\n  }\n\n  render() {\n    if (this.state.error) {\n      return <ErrorMsg/>;\n    }\n\n    const loader = (\n      <div className=\"container\">\n        <div className=\"row\">\n          <div className=\"col-sm-12\">\n            <p className=\"loading-text\">\n              Fetching more beers for ya! Hold on...\n            </p>\n          </div>\n        </div>\n      </div>\n    );\n    \n    return(\n      <InfiniteScroll\n        dataLength={this.state.data.length}\n        scrollThreshold={0.9}\n        next={this.getMoreData}\n        hasMore={this.state.moreItemsToLoad}\n        loader={loader}\n        endMessage={<EndMsg/>}>\n        <div className=\"container\">\n          <div className=\"row list\">\n          {this.state.data.map((beer, key) => {\n              return (<ListElement \n                key={key}\n                id={beer.id}\n                name={beer.name}\n                tagline={beer.tagline}\n                image={beer.image_url}/>);\n            })}\n          </div>\n        </div>\n        <Route path=\"/beer/:id\" component={Modal} />\n      </InfiniteScroll>\n    );\n  }\n}\n\nexport { apiUrl };","import React from 'react';\nimport Header from './common/Header';\nimport List from './List/List';\n\nconst App = () => {\n  return(\n    <div>\n      <Header/>\n      <List/>\n    </div>\n  );\n};\n\nexport default App;","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nimport \"./styles/bootstrap-reboot.min.css\";\nimport \"./styles/bootstrap-grid.min.css\";\nimport \"./styles/styles.css\";\n\nimport App from \"./components/App\";\n\nReactDOM.render(\n    <BrowserRouter>\n        <App />\n    </BrowserRouter>,\n    document.getElementById(\"app\")\n);\n\nserviceWorker.unregister();"],"sourceRoot":""}